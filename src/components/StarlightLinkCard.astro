---
// src/components/StarlightLinkCard.astro
import linkMap from '../../public/discussions.json';
import { useTranslations } from '~/i18n/util';
import { LinkCard } from '@astrojs/starlight/components';

const t = useTranslations(Astro);

// Get current path and remove base if present
const currentPath = Astro.url.pathname;
const base = import.meta.env.BASE_URL || '/';
const normalizedPath = currentPath.replace(base.replace(/\/$/, ''), '');

// Get corresponding forum link
const href = linkMap[normalizedPath] || linkMap['/'];
---

<LinkCard title={t('discussion.title')} href={href} target="_blank" rel="noopener noreferrer" />
